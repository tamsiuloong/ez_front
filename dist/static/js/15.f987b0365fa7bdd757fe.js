webpackJsonp([15],{583:function(e,t,a){var r=a(20)(a(685),a(762),null,null,null);e.exports=r.exports},584:function(e,t,a){e.exports={default:a(585),__esModule:!0}},585:function(e,t,a){a(587),e.exports=a(17).Number.isInteger},586:function(e,t,a){var r=a(30),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},587:function(e,t,a){var r=a(24);r(r.S,"Number",{isInteger:a(586)})},685:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(584),o=(a.n(r),a(208));t.default={data:function(){var e=this;return{tempIndex:0,pageSize:20,pageNo:1,totalPage:0,totalCount:0,columns1:[{title:"编号",key:"id"},{title:"用户名",key:"userName"},{title:"状态",ellipsis:"true",key:"state",filters:[{label:"启用",value:1},{label:"禁用",value:0}],filterMultiple:!1,filterMethod:function(e,t){return 1===e?1===t.state:0===e?0===t.state:void 0},render:function(e,t){var a=parseInt(t.row.state);return 1===a?e("div",[e("Tag",{props:{type:"dot",color:"green"}},"启用")]):0===a?e("div",[e("Tag",{props:{type:"dot",color:"red"}},"禁用")]):void 0}},{title:"操作",key:"action",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.role(a.index)}}},"角色"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.edit(a.index)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(a.index)}}},"删除")])}}],self:this,data1:[],modal1:!1,modal2:!1,modal3:!1,addForm:{dept:{id:""},userName:"",state:"",userInfo:{name:"",manager:{id:""},joinDate:"",salary:"",degree:"",gender:"",station:"",telephone:"",email:"",birthday:"",orderNo:"",remark:""}},updateForm:{dept:{id:""},userName:"",state:"",userInfo:{name:"",manager:{id:""},joinDate:"",salary:"",degree:"",gender:"",station:"",telephone:"",email:"",birthday:"",orderNo:"",remark:""}},roleForm:{id:"",userName:"",roleIds:{}},ruleCustom:{userName:[{required:!0,message:"cannot be empty",trigger:"blur"}]},deptList:{},userList:{},roleList:{},degreeList:[{value:"0",label:"超级管理员"},{value:"1",label:"跨部门跨人员"},{value:"2",label:"管理所有下属部门和人员"},{value:"3",label:"管理本部门"},{value:"4",label:"普通员工"}],model11:"",model12:[]}},methods:{reset:function(e){this.$refs[e].resetFields()},addUser:function(){this.modal2=!0,this.$refs.addForm.resetFields()},add:function(){var e=this;this.$refs.addForm.validate(function(t){if(t){var r=e.addForm;a.i(o.a)({url:"/system/user",method:"post",data:r}).then(function(t){e.data1.unshift(t.data),e.$Message.success("Success!")})}else e.$Message.error("表单验证失败!")})},edit:function(e){this.$refs.updateForm.resetFields(),this.modal1=!0,this.tempIndex=e;var t=this.data1[e];void 0!=t.dept&&(this.updateForm.dept.id=t.deptId),void 0!=t.managerId&&(this.updateForm.userInfo.manager.id=t.managerId),void 0!=t.userInfo&&(this.updateForm.userName=t.userName,this.updateForm.id=t.id,this.updateForm.state=t.state+"",this.updateForm.userInfo.name=t.userInfo.name,this.updateForm.userInfo.joinDate=t.userInfo.joinDate,this.updateForm.userInfo.salary=t.userInfo.salary,this.updateForm.userInfo.degree=t.userInfo.degree+"",this.updateForm.userInfo.gender=t.userInfo.gender+"",this.updateForm.userInfo.station=t.userInfo.station,this.updateForm.userInfo.telephone=t.userInfo.telephone,this.updateForm.userInfo.email=t.userInfo.email,this.updateForm.userInfo.birthday=t.userInfo.birthday,this.updateForm.userInfo.orderNo=t.userInfo.orderNo,this.updateForm.userInfo.remark=t.userInfo.remark)},update:function(){var e=this,t=this.updateForm;a.i(o.a)({url:"/system/user",method:"put",data:t,params:{managerId:t.userInfo.manager.id}}).then(function(t){e.$Message.success("Success!")})},remove:function(e){var t=this,r=this.data1[e].id;a.i(o.a)({url:"/system/user",method:"delete",params:{ids:r}}).then(function(a){"1"==a.data&&(t.$Message.success("Success!"),t.data1.splice(e,1))})},ok:function(){this.modal1=!1,this.$Message.info("点击了确定")},cancel:function(){this.$Message.info("点击了取消")},role:function(e){this.modal3=!0;var t=this.data1[e];this.roleForm.id=t.id,this.roleForm.userName=t.userName,this.roleForm.roleIds=new Array;for(var a=0;a<t.roleSet.length;a++)this.roleForm.roleIds[a]=t.roleSet[a].id},updateRole:function(){var e=this,t=this.roleForm;a.i(o.a)({url:"/system/user/role",method:"put",params:t}).then(function(t){e.$Message.success("Success!")})},handleReset:function(e){this.$refs[e].resetFields()},gopage:function(e){var t=this,r=this.pageSize;a.i(o.a)({url:"/system/user",method:"get",params:{pageNo:e,pageSize:r}}).then(function(a){t.data1=a.data.list,t.pageNo=e,t.pageSize=r,t.totalCount=a.data.totalCount})}},created:function(){var e=this;this.gopage(this.pageNo),a.i(o.a)({url:"/system/dept/getAll",method:"get"}).then(function(t){e.deptList=t.data}),a.i(o.a)({url:"/system/user/getAll",method:"get"}).then(function(t){e.userList=t.data}),a.i(o.a)({url:"/system/role/getAll",method:"get"}).then(function(t){e.roleList=t.data})}}},762:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"animated fadeIn"},[a("div",{attrs:{id:"container"}},[a("Icon",{attrs:{type:"android-add-circle"}}),e._v(" "),a("i-button",{attrs:{type:"error"},on:{click:e.addUser}},[e._v("添加用户")])],1),e._v(" "),a("br"),e._v(" "),a("Table",{attrs:{columns:e.columns1,data:e.data1}}),e._v(" "),a("Page",{attrs:{total:e.totalCount,"page-size":e.pageSize,current:e.pageNo,align:"center"},on:{"on-change":e.gopage}}),e._v(" "),a("Modal",{attrs:{title:"编辑用户",width:"60%"},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Form",{ref:"updateForm",attrs:{model:e.updateForm,rules:e.ruleCustom,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"所在部门",prop:"dept.id"}},[a("Select",{attrs:{filterable:""},model:{value:e.updateForm.dept.id,callback:function(t){e.updateForm.dept.id=t},expression:"updateForm.dept.id"}},e._l(e.deptList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.deptName))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"直属领导",prop:"userInfo.manager.id"}},[a("Select",{model:{value:e.updateForm.userInfo.manager.id,callback:function(t){e.updateForm.userInfo.manager.id=t},expression:"updateForm.userInfo.manager.id"}},e._l(e.userList,function(t){return a("Option",{key:t.id,attrs:{value:t.id,disabled:t.id==e.updateForm.id}},[e._v(e._s(t.userName))])}))],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"登录名",prop:"userName"}},[a("Input",{attrs:{type:"text",readonly:""},model:{value:e.updateForm.userName,callback:function(t){e.updateForm.userName=t},expression:"updateForm.userName"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"姓名",prop:"userInfo.name"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.userInfo.name,callback:function(t){e.updateForm.userInfo.name=t},expression:"updateForm.userInfo.name"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"入职日期",prop:"userInfo.joinDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"Select date"},model:{value:e.updateForm.userInfo.joinDate,callback:function(t){e.updateForm.userInfo.joinDate=t},expression:"updateForm.userInfo.joinDate"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"薪水",prop:"userInfo.salary"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.userInfo.salary,callback:function(t){e.updateForm.userInfo.salary=t},expression:"updateForm.userInfo.salary"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"等级",prop:"userInfo.degree"}},[a("Select",{attrs:{filterable:""},model:{value:e.updateForm.userInfo.degree,callback:function(t){e.updateForm.userInfo.degree=t},expression:"updateForm.userInfo.degree"}},e._l(e.degreeList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"性别",prop:"userInfo.gender"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.updateForm.userInfo.gender,callback:function(t){e.updateForm.userInfo.gender=t},expression:"updateForm.userInfo.gender"}},[a("Radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v("女")])],1)],1)],1),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"状态",prop:"state"}},[a("Radio-group",{attrs:{type:"button"},model:{value:e.updateForm.state,callback:function(t){e.updateForm.state=t},expression:"updateForm.state"}},[a("Radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v("停用")])],1)],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"岗位",prop:"userInfo.station"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.userInfo.station,callback:function(t){e.updateForm.userInfo.station=t},expression:"updateForm.userInfo.station"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"电话",prop:"userInfo.telephone"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.userInfo.telephone,callback:function(t){e.updateForm.userInfo.telephone=t},expression:"updateForm.userInfo.telephone"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"邮箱",prop:"userInfo.email"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.userInfo.email,callback:function(t){e.updateForm.userInfo.email=t},expression:"updateForm.userInfo.email"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"出生年月",prop:"userInfo.birthday"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:e.updateForm.userInfo.birthday,callback:function(t){e.updateForm.userInfo.birthday=t},expression:"updateForm.userInfo.birthday"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"排序号",prop:"userInfo.orderNo"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.userInfo.orderNo,callback:function(t){e.updateForm.userInfo.orderNo=t},expression:"updateForm.userInfo.orderNo"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"说明",prop:"userInfo.remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.updateForm.userInfo.remark,callback:function(t){e.updateForm.userInfo.remark=t},expression:"updateForm.userInfo.remark"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保存")]),e._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(t){e.reset("updateForm")}}},[e._v("清空")])],1)],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:"添加用户",width:"60%"},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("Form",{ref:"addForm",attrs:{model:e.addForm,rules:e.ruleCustom,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"所在部门",prop:"dept.id"}},[a("Select",{attrs:{filterable:""},model:{value:e.addForm.dept.id,callback:function(t){e.addForm.dept.id=t},expression:"addForm.dept.id"}},e._l(e.deptList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.deptName))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"直属领导",prop:"userInfo.manager.id"}},[a("Select",{attrs:{filterable:""},model:{value:e.addForm.userInfo.manager.id,callback:function(t){e.addForm.userInfo.manager.id=t},expression:"addForm.userInfo.manager.id"}},e._l(e.userList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.userName))])}))],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"登录名",prop:"userName"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userName,callback:function(t){e.addForm.userName=t},expression:"addForm.userName"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"姓名",prop:"userInfo.name"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userInfo.name,callback:function(t){e.addForm.userInfo.name=t},expression:"addForm.userInfo.name"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"入职日期",prop:"userInfo.joinDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"Select date"},model:{value:e.addForm.userInfo.joinDate,callback:function(t){e.addForm.userInfo.joinDate=t},expression:"addForm.userInfo.joinDate"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"薪水",prop:"userInfo.salary"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userInfo.salary,callback:function(t){e.addForm.userInfo.salary=t},expression:"addForm.userInfo.salary"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"等级",prop:"userInfo.degree"}},[a("Select",{attrs:{filterable:""},model:{value:e.addForm.userInfo.degree,callback:function(t){e.addForm.userInfo.degree=t},expression:"addForm.userInfo.degree"}},e._l(e.degreeList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"性别",prop:"userInfo.gender"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.addForm.userInfo.gender,callback:function(t){e.addForm.userInfo.gender=t},expression:"addForm.userInfo.gender"}},[a("Radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v("女")])],1)],1)],1),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"状态",prop:"state"}},[a("Radio-group",{attrs:{type:"button"},model:{value:e.addForm.state,callback:function(t){e.addForm.state=t},expression:"addForm.state"}},[a("Radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v("停用")])],1)],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"岗位",prop:"userInfo.station"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userInfo.station,callback:function(t){e.addForm.userInfo.station=t},expression:"addForm.userInfo.station"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"电话",prop:"userInfo.telephone"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userInfo.telephone,callback:function(t){e.addForm.userInfo.telephone=t},expression:"addForm.userInfo.telephone"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"邮箱",prop:"userInfo.email"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userInfo.email,callback:function(t){e.addForm.userInfo.email=t},expression:"addForm.userInfo.email"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"出生年月",prop:"userInfo.birthday"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"Select date"},model:{value:e.addForm.userInfo.birthday,callback:function(t){e.addForm.userInfo.birthday=t},expression:"addForm.userInfo.birthday"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"排序号",prop:"userInfo.orderNo"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.userInfo.orderNo,callback:function(t){e.addForm.userInfo.orderNo=t},expression:"addForm.userInfo.orderNo"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"说明",prop:"userInfo.remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.addForm.userInfo.remark,callback:function(t){e.addForm.userInfo.remark=t},expression:"addForm.userInfo.remark"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.add()}}},[e._v("保存")]),e._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(t){e.reset("addForm")}}},[e._v("清空")])],1)],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:"分配角色",width:"60%"},on:{"on-ok":e.updateRole,"on-cancel":e.cancel},model:{value:e.modal3,callback:function(t){e.modal3=t},expression:"modal3"}},[a("Form",{ref:"roleForm",attrs:{model:e.roleForm,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"登录名",prop:"userName"}},[a("Input",{attrs:{type:"text"},model:{value:e.roleForm.userName,callback:function(t){e.roleForm.userName=t},expression:"roleForm.userName"}})],1)],1)],1),e._v(" "),a("Row",[a("FormItem",{attrs:{label:"角色",prop:"roleIds"}},[a("CheckboxGroup",{model:{value:e.roleForm.roleIds,callback:function(t){e.roleForm.roleIds=t},expression:"roleForm.roleIds"}},e._l(e.roleList,function(t,r){return a("Checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=15.f987b0365fa7bdd757fe.js.map